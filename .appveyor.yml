version: 'git.{build}'

# Choose a single image, ideally the most recent
image: Visual Studio 2022

# Disable default MSBuild-based build
build: off

install:
  - cmd: python -m pip install --upgrade pip
  - cmd: pip install meson ninja

before_build:
  # Set up the MSVC 64-bit build environment
  - cmd: call "C:\Program Files (x86)\Microsoft Visual Studio\2022\Community\VC\Auxiliary\Build\vcvars64.bat"

build_script:
  - cmd: meson setup build 
  - cmd: meson compile -C build

test_script:
  - cmd: meson test -C build --verbose
